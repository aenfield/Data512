# README
## Predicting Elections with "Mister P" (MRP, multi-level regression and post-stratification)
## Andrew Enfield, University of Washington Data 512 Autumn 2017

# Abstract

In this project I used Bayesian multi-level regression and post-stratification (MRP), and Python and [PyMC3](https://github.com/pymc-devs/pymc3) to adjust an unrepresentative sample of election preferences and predict the outcome of the 2016 US Presidential election. My results don't match the survey from which I used the raw data, possibly because I haven't used enough predictors (in the interest of simplicity). Nonetheless, the code and explanation show an attempt at learning and applying MRP using a language and MCMC framework that I haven't found used for such a purpose before. 

**NOTE:** I'm new to this concept and PyMC3, and did this work without review. If you happen upon this project and see things I did incorrectly or can do better, please let me know - it'll help me continue to learn.

## License

This code is licensed as described in the [LICENSE](LICENSE) file. The data persisted as the mrp_cells.csv file is licensed using the [CC BY 2.5 license](https://creativecommons.org/licenses/by/2.5/). (The source data described below in the Data section is not included in this CC license, and is used under the terms described in that section.)

# Data

This work uses data from the following sources:
- Pew Research Center ["October 2016 Political Survey"](http://www.people-press.org/dataset/october-2016-political-survey), under the terms of use reproduced in the appendix below. I have "incorporate[d] limited portions of the [d]ata in [this] scholarly, research or academic publications" in the pew_poll.csv file, which contains a small subset of the columns in the original report, each of which represents demographic information and poll responses from a single person.
- [IPUMS Current Population Survey](https://cps.ipums.org/cps/), under the agreement reproduced in the appendix below. I have "publish[ed] a subset of the data to meet journal requirements for accessing data related to a particular publication" in the cps_population.csv and cps_votes.csv files. The former contains cross-tabulated population data from the "IPUMS-CPS, ASEC 2016" data set; the latter contains information about how often people voted, from the "IPUMS-CPS, November 2016" monthly data set. Both files contain a row per person. (The license requests that I "supply [them] with the title and full citation for any publications, research reports, or educational materials making use of the data or documentation". I've tried to do this multiple times using the page at https://bibliography.ipums.org/user_submissions/new but always receive a "We're sorry, but something went wrong" error message. TODO keep trying and either update this or send them a mail w/ the detail and then say that I've done that here.)

# Implementation

To reproduce the analysis, run the code in the [MRP_Presidential_Election_2016.ipynb](MRP_Presidential_Election_2016.ipynb) notebook.


# Fields in the output data file

I've persisted a copy of the final data set generated by the previously mentioned notebook in the repo as [mrp_cell.csv](mrp_cell.csv). This file has the following fields.

| Column      	      	  | Description |
| ----------------------- | ----------- |
| TBD     | TBD. |
| TBD     | TBD. |
| TBD     | TBD. |


# Appendix

## Pew Research Center TOU for "October 2016 Political Survey"

Pew Research hereby grants to the User a non-exclusive, revocable, limited, non-sublicensable, non-transferable license to use the Data solely for (1) research, scholarly or academic purposes, (2) the internal use of your business (e.g., not for further distribution or resale), or (3) your own personal non-commercial use. You may not reproduce, sell, rent, lease, loan, distribute or sublicense or otherwise transfer any Data, in whole or in part, to any other party, or use the Data to create any derived product for resale, lease or license.  Notwithstanding the foregoing, you may incorporate limited portions of the Data in scholarly, research or academic publications or for the purposes of news reporting, provided you acknowledge the source of the Data (with express references to the Center, as well as the complete title of the report) and include the following legend:
 
The Pew Research Center bears no responsibility for the analyses or interpretations of the data presented here.
 
THE DATA IS PROVIDED "AS IS" WITHOUT ANY WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, ARISING BY LAW OR OTHERWISE, INCLUDING BUT NOT LIMITED TO WARRANTIES OF COMPLETENESS,  NON-INFRINGEMENT, ACCURACY, MERCHANTABILITY, OR FITNESS FOR A PARTICULAR PURPOSE.  THE USER ASSUMES ALL RISK ASSOCIATED WITH USE OF THE DATA AND AGREES THAT IN NO EVENT SHALL THE CENTER BE LIABLE TO YOU OR ANY THIRD PARTY FOR ANY INDIRECT, SPECIAL, INCIDENTAL, PUNITIVE OR CONSEQUENTIAL DAMAGES INCLUDING, BUT NOT LIMITED TO, DAMAGES FOR THE INABILITY TO USE EQUIPMENT OR ACCESS DATA, LOSS OF BUSINESS, LOSS OF REVENUE OR PROFITS, BUSINESS INTERRUPTIONS, LOSS OF INFORMATION OR DATA, OR OTHER FINANCIAL LOSS, ARISING OUT OF THE USE OF, OR INABILITY TO USE, THE DATA BASED ON ANY THEORY OF LIABILITY INCLUDING, BUT NOT LIMITED TO, BREACH OF CONTRACT, BREACH OF WARRANTY, TORT (INCLUDING NEGLIGENCE), OR OTHERWISE, EVEN IF USER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
  
The Center has taken measures to ensure that the Data is devoid of information that could be used to identify individuals (e.g., names, telephone numbers, email addresses, social security numbers) who participated in or who were the subject of any research surveys or studies used to collect the Data ("Personally Identifying Information").  However, in the event that you discover any such Personally Identifying Information in the Data, you shall immediately notify the Center and refrain from using any such Personally Identifying Information.
 
This license will terminate (1) automatically without notice from the Center if you fail to comply with the provisions of this agreement, or (2) upon written notice (by e-mail, U.S. or otherwise) from the Center.  Upon termination of this agreement, you agree to destroy all copies of any Data, in whole or in part and in any and all media, in your custody and control. 
 
This agreement shall be governed by, construed and interpreted in accordance with the laws of the District of Columbia. You further agree to submit to the jurisdiction and venue of the courts of the District of Columbia for any dispute relating to this Agreement.

## IPUMS CPS usage license and citation

IPUMS CPS USAGE LICENSE

Redistribution: You will not redistribute the data without permission.
You may publish a subset of the data to meet journal requirements for accessing data related to a particular publication. Contact us for permission for any other redistribution; we will consider requests for free and commercial redistribution.

Citation: Cite the IPUMS CPS data appropriately
For information on proper citation refer to citation and use. Publications and research reports making use of IPUMS CPS should be added to our Bibliography.

IMPORTANT: These terms of use are a legally binding agreement. You can use the data only in accordance with these terms, and any other use is a violation of the agreement. Violations may result in revocation of the agreement and prohibition from using other IPUMS data. If IPUMS or our partners are harmed from your violation, you are responsible for all damages, including reasonable attorneyâ€™s fees and expenses.


CITATION AND USE OF THE IPUMS-CPS

Publications and research reports based on the IPUMS-USA database must cite it appropriately. The citation should include the following:

Sarah Flood, Miriam King, Steven Ruggles, and J. Robert Warren. Integrated Public Use Microdata Series, Current Population Survey: Version 5.0. [dataset]. Minneapolis: University of Minnesota, 2017. https://doi.org/10.18128/D030.V5.0.
For policy briefs or articles in the popular press that use the IPUMS-CPS database, we recommend that you cite the use of IPUMS data as follows:

IPUMS-CPS, University of Minnesota, www.ipums.org.

The licensing agreement for use of IPUMS-CPS data requires that users supply us with the title and full citation for any publications, research reports, or educational materials making use of the data or documentation.




